# 通信框架

## 关键技术点分析

### 长连接还是短连接

绝大多数的分布式服务框架(RPC框架)都推荐使用长连接进行内部通信,为什么选择长连接而不是短连接呢?

- 相比于短连接,长连接更节省资源

- 远程通信是常态,调用时延是关键指标

# 功能设计

## 可靠性设计

### 链路有效性检测

心跳检测机制分为三个层面:

- TCP层面的心跳检测,即TCP的FCeep-Alive机制,它的作用域是整个TCP协议栈。

- 协议层的心跳检测,主要存在于长连接协议中,例如SMPP协议。

- 应用层的心跳检测,它主要由各业务产品通过约定方式定时给对方发送心跳消息实现。
